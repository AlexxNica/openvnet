#!/usr/bin/env ruby
# -*- coding: utf-8 -*-

$LOAD_PATH.unshift File.expand_path('../../lib', __FILE__)

require 'rubygems'
require 'bundler/setup'
require 'vnmgr'
require 'celluloid'

#path = ['/etc/wakame-vnet/vna.conf', File.expand_path('config/vna.conf', Vnmgr::ROOT)].find { |i| File.exists?(i) }
#abort("ERROR: Failed to load vna.conf") if path.nil?

config_dir="/etc/wakame-vnet/"
conf = Vnmgr::Configurations::Vna.load("#{config_dir}/common.conf", "#{config_dir}/vna.conf")
Vnmgr::ModelWrappers::Base.set_proxy(conf)

service_openflow = Vnmgr::NodeModules::ServiceOpenflow.new
service_openflow.start

sleep 3
