#!/usr/bin/env ruby
# -*- coding: utf-8 -*-

$LOAD_PATH.unshift File.expand_path('../../lib', __FILE__)

require 'rubygems'
require 'bundler/setup'
require 'vnmgr'
require 'celluloid'

conf = Vnmgr::Configurations::Vna.conf
Vnmgr::ModelWrappers::Base.set_proxy(conf)


sleep 10

service_openflow = Vnmgr::NodeModules::ServiceOpenflow.new
service_openflow.start

(1..10).each {
  p "Main thread loop"

  service_openflow.controller.pass_task {
    p "Ping to trema thread."
  }

  sleep 1
}

service_openflow.stop
sleep 1

